## 什么是五级流水线，数据冒险是什么?

### 什么是五级流水线？
指令流水线是指将指令的处理过程拆分为若干个阶段，每个阶段硬件处理单元进行阶段处理，并行执行，用来加快指令的执行速度。指令的处理流程简单规划可以分为：从存储器中取出指令；翻译指令，使计算机知道指令是要怎么工作；\*执行指令，进行相应的指令执行。

五级流水线是指将指令流水线分为五个部分：取指（IF）；译码（ID）；执行（EX）；访存(访问存储器，MEM）；\*写回（数据写回到目标寄存器，write back）；


各个阶段的作用：
IF：从指令存储器中取出指令，同时确定下一条指令地址（指针指向下一条指令）
ID：翻译指令，让计算机知道指令是要干什么的，同时让计算机得出要使用的寄存器，或者让**立即数**进行拓展（方便指后续指令执行），亦或者（转移指令）给出转移目标寄存器与转移条件。
EX：执行指令，此阶段按照指令给定的内容进行执行
MEM：若为load/store指令，这个阶段就要访问存储器。此外，指令从EX向下执行到WB阶段。另外，这个阶段还要判断是否有异常要处理，如果有，那么就清除流水线，然后转移到异常处理例程入口地址处继续执行。
WB：将运算结果保存到目标寄存器


### 数据冒险是什么？

流水线技术之所以能够提高性能，本质上是利用了时间上的并行性，那它让原本应该先后执行的指令在时间上一定程度的并行起来，然后也会带来一些冲突和矛盾；

冒险：在流水线中，我们希望时钟周期都有一条指令进入流水线可以执行。但是在某些情况下，下一条指令无法按照预期进行执行，这种情况就被称为冒险。

冒险分为三种：

- 结构冒险：如果一条指令需要的硬件部分还在为之前的指令工作，而无法这条指令提供服务，那就导致了结构冒险（也称为资源冲突）
- 数据冒险：如果一条指令需要某数据而该数据正在被之前的指令操作，那么这条指令就无法执行，就导致了数据冒险（也称为数据相关性）
- 控制冒险：如果现在要执行哪条指令，是由之前指令的运行结果决定，而现之前的那条指令结果还没产生，就会导致控制冒险
