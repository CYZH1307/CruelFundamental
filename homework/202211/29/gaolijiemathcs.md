### 什么是五级流水线，数据冒险是什么

五级流水线的概念，如下： *取指（IF）；* 译码（ID）； *执行（EX）；* 访存（访问存储器，MEM）

IF：从指令存储器中取出指令，同时确定下一条*指令地址*（指针指向下一条指令）；

ID：翻译指令，让计算机知道这条指令是要干什么的，同时让计算机得出要使用的寄存器，或者让**立即数**进行拓展（方便后续指令执行），亦或者（**转移指令**）是给出转移目的寄存器与转移条件；

EX：执行指令，此阶段按照指令给的内容进行执行；

MEM：若为*load/store*指令，这个阶段就要访问存储器。此外，指令从EX向下执行到WB阶段。**另外**，**在这个阶段还要判定是否有异常要处理，如果有，那么就清除流水线，然后转移到异常处理例程入口地址处继续执行。**（异常这个玩意儿会之后讲解。）

WB：将运算结果保存到目标寄存器。



1. **数据冒险**：当指令在流水线中重叠执行时，后面的指令需要用到前面的指令的执行结果，而前面的指令尚未写回导致的冲突，称为数据冒险（也称为**数据相关性**）。
2. **结构冒险**：当一条指令需要的硬件部件还在为之前的指令工作，而无法为这条指令提供服务，那就导致了结构冒险。（这里结构是指硬件当中的某个部件、也称为**资源冲突**）。
3. **控制冒险**：如果现在想要执行哪条指令，是由之前指令的运行结果决定，而现在那条之前指令的结果还没产生，就导致了控制冒险（实际上就是riscv的跳转指令引起的，跳转指令要经过2个周期后才会出现**跳转结果**）。



ref:https://zhuanlan.zhihu.com/p/438259856

https://zhuanlan.zhihu.com/p/447682231