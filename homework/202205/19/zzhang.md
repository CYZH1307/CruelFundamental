C++: STL内存优化是怎么做的？

1. 内存管理使用的二级内存配置器
- >= 128 B：第一级配置器
- < 128 B：第二级配置器

第一级：
- 使用`malloc()`, `free()`, `realloc`等执行内存配置、释放、重新配置等

第二级：
- 避免太多小区块带来的内存碎片
- 使用内存池管理

2. 二级内存池

- 每次配置一大块内存，维护对应的16个free-list，16个free-list分别管理大小分别为8，16，24，...，128的数据块。
- 下次若有相同大小的内存需求，则直接从free-list中取。
- 如果有小额区块被释放，则由配置器回收到free-list中。
- 在free-list中查找不到或者块数不够时，则向内存池申请，一般一次20块。
