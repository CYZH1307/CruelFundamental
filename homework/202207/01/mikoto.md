## 什么是MVCC？

MVCC是多版本并发控制，MVCC是一种并发控制的方法，可减少锁的使用。

MVCC在每行记录后面都保存两个隐藏的列，用来存储创建版本号和删除版本号

1. 创建版本号， 创建一个数据行的事务版本号（事务版本好，事务开始时的系统版本号，每创建一个，系统版本号自动递增）；
2. 删除版本号，删除操作时的事务版本号

3. 操作：
    - 插入操作时，记录创建版本号
    - 删除操作时，记录删除版本号
    - 更新操作时，先记录删除版本号然后新增一行记录创建版本号
    - 查询操作时：要符合条件才能正确查询，删除版本号未定义或者大于当前事务版本号。创建版本号小于或等于当前事务版本号
