#### 简述TCP四次挥手过程，为什么TCP挥手需要4次？为什么四次挥手释放连接时需要等待2MSL？

> 四次挥手的过程，其实就是 tcp 中客户端和服务端断开连接的过程。
>
> 涉及的状态码有ACK、FIN，其中FIN=1表示关闭连接，ACK=1表示响应。

- 第一次挥手：客户端发送一个**FIN=1**到服务端，用来关闭客户端到服务端的数据传送，客户端进入FIN_WAIT_1状态，表示没有数据发送给服务端。
- 第二次挥手：服务端收到FIN=1后，会先发送ACK=1给客户端，表示收到。这个时候客户端收到ACK=1会进入FIN_WAIT_2状态。
- 第三次挥手：当服务端确认数据已发送完毕，则向客户端发送FIN=1报文，表示服务器已经准备好关闭连接。服务器进入LAST_ACK状态。
- 第四次挥手：客户端收到FIN=1报文， 就知道可以关闭连接了，会发送ACK=1给服务端，然后进入TIME_WAIT状态，服务端收到ACK=1则关闭连接，而客户端等待2MSL时间后没有收到服务端回复，也会关闭连接。最终连接关闭成功。