# 简述DNS劫持

1、DNS劫持

DNS劫持即域名劫持。域名劫持通过攻击域名解析服务器(DNS)，或者伪装为域名解析服务器，将目标网站域名解析到错误的IP地址，从而使得用户无法访问目标网站。

2、DNS劫持原理

- DNS域名解析：将网络地址=>真实IP地址，进一步进行访问目标网站。
- DNS劫持：域名劫持，劫持或伪装为DNS 将 网络地址 => 错误IP地址，用户无法访问目标网站。

- 如果有域名的真实IP地址，就可以直接绕开DNS服务器，直接访问。

3、常见DNS劫持攻击

- 中间人DNS劫持攻击，中间人拦截用户与DNS服务器之间的通信，从而提供不同的IP。
- DNS服务器攻击：直接攻击DNS服务器，将DNS记录重定向到恶意网站
- 本地DNS劫持：修改本地DNS设置。
- 路由器DNS劫持。

4、常见防御

- DNS加密(DNSSEC)
- 直接IP通信
- 数据加密



DNS寻址过程：

- 浏览器域名：操作系统检查本地host有误网址映射，有就直接映射。

- 没有，则本地DNS解析器缓存，有返回，无继续。

- 找TCP/IP中首选的DNS服务器，本地DNS服务器。

- 查询域名：不由本地DNS服务器解析，服务器缓存了网址因社会，调用IP映射。

- 本地DNS服务器与缓存解析都失效：转发模式和非转发模式进行转发查找

  （1）非转发模式：本地DNS转发到13台根服务器，根服务器找授权管理，找一个IP。本地DNS收到IP则继续查找下一级DNS。重复直到查找

  （2）转发模式，本地DNS转发上一级，上一级继续解析，直到转发继续上一级到找到了，最后逐层返回。

  

