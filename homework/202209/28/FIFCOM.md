## 什么是视图？（数据库）

视图是一个虚拟表，其内容由查询定义，即视图中的数据并不像表、索引那样需要占用存储空间，视图中保存的仅仅是一条select语句，其数据源来自于数据库表，或者其他视图。不过，它同真实的表一样，包含一系列带有名称的列和行数据。但是，行和列数据来自于定义视图的查询所引用的表，并且在引用视图时动态生成。当基本表发生变化时，视图的数据也会随之变化。

视图可以是一个数据表的一部分，也可以是多个表的联合。

通常用来进行这三种操作:
1. 筛选表中的行
2. 防止未经许可的用户访问数据(安全性)
3. 将多个物理数据表抽象为一个逻辑数据表(提高数据的逻辑独立性)

视图上的操作和基表类似，但是DBMS对视图的增删改往往存在一定的限制。

定义/修改/删除视图:
```sql
-- MERGE表示将使用视图的语句与定义合起来，使得视图定义的某部分取代语句的对应部分
-- TEMPTABLE选择表示将视图的结果存入临时表，然后使用临时表执行语句
create [algorithm = undefined | merge | temptable]
    view view_name [column_list(字段名列表)] as
    select 语句;

create view male as
    select * from students where sex = 'male';

desc male; -- 查看视图的字段信息
show table status like '视图名'; -- 查看视图
create or replace view ... -- 修改视图
alter [algo...] view 视图名 ... -- 修改视图
drop view [if exist] 视图名; -- 删除视图
```

**视图操作数据的限制**
1. 使用INSERT语句进行插入操作的视图必须能够在基表中插入数据，否则插入操作会失败
2. 如果在视图中使用**聚合函数**的结果，或者是包含表达式计算的结果，则插入操作不成功。
3. 不能在使用了DISTINCT,UNION，TOP，GROUP BY 或HAVING语句的视图中插入数据。
4. 对于由多个基表联接查询而生成的视图来说，一次插入操作只能作用于一个基表上。
5. SELECT语句不能包含FROM子句中的子查询
6. SELECT语句不能引用系统或用户变量
7. SELECT语句不能引用预处理语句参数
8. 不能将触发器与视图关联在一起
9. 在定义中不能引用TEMPORARY表，不能创建TEMPORARY视图