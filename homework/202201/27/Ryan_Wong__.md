# 隔离级别可重复读下MySQL是如何解决幻读的？

1.在快照读读情况下，如select * from t where a=1，MySQL通过MVCC来避免幻读。每次读取到的都是指定范围的快照，这指定范围内的数据条数也被快照记录下来，使用该快照的时候数据条数不会变化，也就没有了幻读。  
2.在当前读读情况下，如select * from t where a=1 lock in share mode，MySQL通过next-key lock来避免幻读。该锁相当于用读写锁住了一段范围内的行，可以看做是一个局部的表锁，阻止该范围的插入。锁作用期间数据条数就不会发生变化，解决了幻读。
