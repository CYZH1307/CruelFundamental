# 什么是lamport logical clock?

lamport logical clock: 分布式系统中用于区分事件发生顺序的逻辑时钟.

## 定义

分布式系统中按是否存在节点交互可分为三类事件，一类发生于节点内部，二是发送事件，三是接收事件。

1. 每个事件对应一个Lamport时间戳，初始值为0
2. 如果事件在节点内发生，本地进程中的时间戳加1
3. 如果事件属于发送事件，本地进程中的时间戳加1并在消息中带上该时间戳
4. 如果事件属于接收事件，本地进程中的时间戳 = max(本地时间戳，消息中的时间戳) + 1

假设有事件a、b，C(a)、C(b)分别表示事件a、b对应的Lamport时间戳，如果a发生在b之前(happened before)，记作 a -> b，则有C(a) < C(b)，例如图1中有 C1 -> B1，那么 C(C1) < C(B1)。通过该定义，事件集中Lamport时间戳不等的事件可进行比较，我们获得事件的偏序关系(partial order)。注意：如果C(a) < C(b)，并不能说明a -> b，也就是说C(a) < C(b)是a -> b的必要不充分条件

Lamport逻辑时钟只保证因果关系（偏序）的正确性，不保证绝对时序的正确性。

## 参考

[ref-Link](https://zhuanlan.zhihu.com/p/56146800/)
