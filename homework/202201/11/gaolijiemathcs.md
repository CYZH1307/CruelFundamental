# https的连接过程

Step1：客户端服务器端协商加密组件确定(SSL版本、加密算法、秘钥长度等)

Step2：服务器端发送公开加密证书

Step3：客户端验证公开加密证书签名，验证通过取出公钥。

Step4：生成pre-master secrete随机数，用服务器上的公开秘钥进行对pre-master加密处理。发送给客户端，已经加密过的pre-master secret。

Step5：服务器端用自己公钥对应的私钥解密，得到pre-master secret，这样双方都获得到了客户端共享出来的，共享秘钥，master secret。

Step6：通过共享的秘钥master secret，可以进一步生成。客户端和服务器端都能拥有，共享的秘钥、报文校验码的秘钥、生成CBC模式的初始向量。即双方拥有了（共享秘钥加密的秘钥+报文校验码的秘钥+生成CBC的初始向量），后面通过这个共享的秘钥情况，进行加密通信。

