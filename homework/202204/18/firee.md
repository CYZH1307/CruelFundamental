### Linux 读写数据的整个流程，内核状态如何切换

1.用户通过系统调用陷入内核态

2.内核态完成从外设读取数据到内核空间

3.把内核空间的数据copy到用户空间

4.返回用户态

##### 优化

可以用DMA传输，加快速度，同时也能解放cpu，并行运行其他进程

对从外设读的数据做缓存，不用每次都读外设(这里我有想过直接利用页表机制，在2直接做映射，把读取数据推迟到3进行，但是DMA应该对更大的连续空间更友好，所以映射完之后应该会主动的去做读取操作，而且映射应该会利用伙伴算法，尽可能分配连续的物理页)

##### 零拷贝优化

这个过程涉及一次从内核空间到用户空间的一次拷贝，这个拷贝显然是可以优化的，与网络文件结合更是花样百出，可以参考https://zhuanlan.zhihu.com/p/83398714(感谢丽杰提供的资源！)