## 分布式系统一致性的需求和解决方案

### 一致性的分类和标准

#### 强一致 
如果用户完成更新之后，任何节点，任何后续进程都会返回最新的update过后的值。根据前几天学到的CAP原理，强一致性会需要CA或者CP，则需要牺牲扩展性或者可用性。

#### 弱一致性
弱一致性不能保证续进程都会返回最新的值。在用户成功写入数据之后，系统不能保证立即可以读到最新的值。

#### 最终一致性
最终一致性为弱一致性的一种，在弱一致性的基础上，系统保证在没有后续的更新的前提下，系统会最终返回最新的值。除了核心交易系统有强一致性要求，在大部分实践当中，大多将强一致性需求转换成最终一致性的需求。

### 解决方案

#### 二阶段提交协议

二阶段提交协议通过两个阶段来协商一个提交操作。阶段一：通知阶段， 阶段二：提交阶段

![image](https://user-images.githubusercontent.com/90691060/135697673-ed935d39-e621-48c7-9639-865a4713dea6.png)


#### TCC
TCC代表了 Try, Confirm, Cancel，分为预留，提交两个阶段

![image](https://user-images.githubusercontent.com/90691060/135697806-dc83c85c-c4c9-48f4-89dc-70b1a8b7ce0a.png)


