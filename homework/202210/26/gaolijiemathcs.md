### select、poll、epoll之间的区别

#### 1、select

select是操作系统提供的系统调用函数，使用该函数，我们可以将一个文件描述符数组(fd数组)发给操作系统，然后让操作系统确定哪个文件描述符可以读写，然后告诉我们去处理。

select为系统阻塞调用，特点如下：

(1)select 调用需要传入fd数组，需要拷贝一份到系统内核，高并发场景下拷贝的消耗很大。(可以优化为不复制)

(2)select在系统内核层仍然是通过遍历的方式去检查文件描述符数组中每个文件描述符的状态，是一个同步的过程，只不过不需要系统切换上下文，用户层需要同步等待内核层遍历。(可以优化内核层为异步事件通知方式)

(3)select使用时，内核层仅仅可以返回可读的文件描述符个数，具体哪个可读需要用户得到数字后，自己重新遍历一遍本地的文件描述符数组。（可以优化为返回用户就绪的文件描述符，无需重新遍历）

#### 2、poll

poll也是操作系统提供的系统调用函数，和select的区别，去掉了select只能监听1024个文件描述符的长度限制。

#### 3、epoll

epoll解决了select与poll中的一些问题。(主要是针对三个特点进行改进)：

(1)内核中保存了一份文件描述符集合，不需要用户每次都重新传入文件描述符，用户层只需要告诉内核文件描述符数组被修改的部分即可。并且内核中保存的文件描述符集合优化为了红黑树的结构。

(2)内核不再通过不断轮询的方式找到就绪的文件描述符，而是通过异步IO事件的方式，等待有数据到达，文件描述符触发内核IO事件异步唤醒。

(3)内核仅会将有IO事件的文件描述符返回给用户，用户不需要遍历整个文件描述符集合。



