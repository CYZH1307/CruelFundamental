# 6种延时队列
延时队列和消息队列有相似的地方，区别点在于需要让消息的消费有一个时延。在业务中非常常见，比如某个抢车票的任务30分钟内未支付，我们希望将交易取消。

## JDK 内置 Delay Queue
队列中的对象需要实现getDelay方法即可。

## Quartz 定时任务
我个人觉得这不是一个很合适的方法，本来是用来执行 cron job 的，用来实现延时任务会有一定的延迟。

## redis sorted set
和用redis实现消息队列其实差不多。我们用当前时间+延迟作为有序的score，取出最先的元素即可。
但可能需要轮询，也不是很好。

## redis 过期回调
redis key 超时可以设置回调，有通知机制。延时可以通过过期实现，个人觉得是一个不错的方式，我想底层的实现也是基于时间轮算法的。

## rabbit mq
通过TTL和DLX实现。

## 时间轮
大部分定时任务系统的底层实现。我有动手实现过，不展开讲解了～
