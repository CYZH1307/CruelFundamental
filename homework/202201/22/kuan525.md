### MySQL中的几种日志

- 重做日志（redo log）

**作用：**确保事务的持久性。redo日志记录事务执行后的状态，用来恢复未写入data file的已成功事务更新的数据。防止在发生故障的时间点，尚有脏页未写入磁盘，在重启mysql服务的时候，根据redo log进行重做，从而达到事务的持久性这一特性。
**产生与释放：**事务开始之后就产生redo log，redo log的落盘并不是随着事务的提交才写入的，而是在事务的执行过程中，便开始写入redo log文件中。当对应事务的脏页写入到磁盘之后，redo log的使命也就完成了，重做日志占用的空间就可以重用（被覆盖）。

- 回滚日志（undo log）

**作用：**保证数据的原子性，保存了事务发生之前的数据的一个版本，可以用于回滚，同时可以提供多版本并发控制下的读（MVCC），也即非锁定读
**产生与释放：**事务开始之前，将当前是的版本生成undo log，undo 也会产生 redo 来保证undo log的可靠性。当事务提交之后，undo log并不能立马被删除，而是放入待清理的链表，由purge线程判断是否由其他事务在使用undo段中表的上一个事务之前的版本信息，决定是否可以清理undo log的日志空间。

- 二进制日志（binlog）

**作用：**在主从复制中，从库利用主库上的binlog进行重播，实现主从同步。 用于数据库的基于时间点的还原。
**产生与释放：**事务提交的时候，一次性将事务中的sql语句按照一定的格式记录到binlog中；超过配置的天数之后会被自动删除(默认永久不删除)。

- 错误日志（errorlog）

错误日志记录着mysqld启动和停止,以及服务器在运行过程中发生的错误的相关信息。在默认情况下，系统记录错误日志的功能是关闭的，错误信息被输出到标准错误输出。

- 慢查询日志（slow query log）

慢日志记录执行时间过长和没有使用索引的查询语句，包括select、update、delete以及insert语句，慢日志只会记录执行成功的语句。

- 普通日志（general log）

记录了服务器接收到的每一个查询或是命令，无论这些查询或是命令是否正确甚至是否包含语法错误，general log 都会将其记录下来 ，记录的格式为 {Time ，Id ，Command，Argument }。

- 中继日志（relay log）

用于从服务器和主服务器的数据保持一致。