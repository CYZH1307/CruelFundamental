### 什么是COW

fork出子进程往往不需要复制数据，因为子进程大概率会执行exec()函数运行其它命令

因此，为了减少复制消耗，就有了Copy on write这个技术

- fork出的子进程 与父进程共享内存空间，如果子进程不对内存空间进行写入操作的话，内存空间的数据不会复制给子进程，提高创建子进程的速度
- 如果fork函数返回后，子进程第一时间调用exec执行一个新的命令，也不会浪费时间和空间。


实现原理：

fork()之后，kernel吧父进程中所有内存页的权限都设置为read-only，然后子进程的地址空间指向父进程，当父子进程都只读内存时，问题不大，但是当某个进程写内UC你是，cpu硬件检测到内存页readonly，因此会触发页异常中断，陷入kernel的一个中断函数，kernel会复制一份触发异常的页，然后父子进程各自持有独立的一份
