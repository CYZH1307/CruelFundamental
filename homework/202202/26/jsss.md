# traceroute是怎么traceback, 最终让发出traceroute的客户端得到信息的

1. 源主机向目标主机发送一系列的UDP报文. 第一个报文的生存时间**TTL = 1**, 当其到达路径上第一个路由器时, 该路由器将TTL值减1, 并发现TTL = 0. 因此路由器将其丢弃, 并**发送给源主机ICMP不可达**的报文. 
2. 源主机收到ICMP不可达报文后, 接着发送TTL = 2的报文, 这样确定路径上第2个路由器.
3. 这样循环往复, 直到数据报到达目标主机, 由于traceroute发送的是端口号大于30000的UDP报文, 因此目标主机只能发送一个**端口不可达**的ICMP数据包(无法交付的UDP报文)给源主机.
4. 通过这种方法源主机知道了到目标主机路径上的路由器的IP和目标主机是否联通等信息.