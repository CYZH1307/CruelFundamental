### 讲一讲数据库主从的概念、优点、用途

#### 1. 概念

数据库主库与从库之间为备份关系，一般用于读写分离，主库负责写，从库负责读，降低服务器压力。

#### 2.优点

（1）降低数据库查询压力

（2）数据备份，数据库的高可用

#### 3.用途

（1）数据库高可用，数据备份

（2）降低数据库查询压力



#### 4.主从同步原理（主从事务日志同步过程）

主库A和从库B维持一个长连接。

1.从库B通过change master指令，设置主库A的ip、用户名、密码等等，以及从哪个位置开始请求binlog（文件名+日志偏移量）

2.从库B执行start slave 启动两个线程，io_thread和sql_thread，io_thread负责与主库A建立连接，sql_thread负责对sql日志从库重放。

3.主库A校验完用户名、密码等，开始按照备库B传来的位置，从本地读取binlog，发给B。

4.备库B通过io_thread从主库的dump_thread拿到binlog，写到本地，得到中转日志(relay log)。

5.sql_thread读取中转日志，解析出日志命令，执行。

