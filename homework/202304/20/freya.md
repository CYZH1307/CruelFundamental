## 中断的处理

中断的处理有以下五个阶段：

1. 中断请求：当外设发出中断信号后，信号被输入，之后检查是否屏蔽了该信号。
2. 中断判优：读取寄存器的内容，检查状态，去欸的那个优先级
3. 中断响应：CPU向中断源发出中断响应信号，同时：  保护硬件现场； 关中断； 保护断点； 获得中断服务程序的入口地址。
4. 中断服务：（1）保护现场。 在中断服务程序的起始部分安排若干条入栈指令，将各寄存器的内容压入堆栈保存。（2）开中断。 在中断服务程序执行期间允许级别更高的中断请求中断现 行的中断服务程序，实现中断嵌套。（3）中断服务。 完成中断源的具体要求。（4）恢复现场。 中断服务程序结束前，必须恢复主程序的中断现场。通常是将保存在堆栈中的现场信息弹出到原来的寄存器中。（5）中断返回。 返回到原程序的断点处，继续执行原程序
5. 中断返回：返回到原程序的断点处，恢复硬件现场，继续执行原程序。