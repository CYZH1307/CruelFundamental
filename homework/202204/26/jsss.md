# 讲一讲数据库主从的概念、优点、用途

## 概念

数据库主从就是将数据库分为主库和从库, 主库完成写数据操作、从库完成读数据操作. 主从库之间使用日志和网络来进行数据的同步. 

## 优点

- 冗余备份
    每个从库都是主库数据的备份, 当某个库出现故障时, 可以降低损失, 保证数据库服务的高可用.

- 读写性能
    读写操作分离, 可以减少某个库的性能压力, 提高并发性能. 主库可以选择MySQL的Innodb引擎来提升写操作的性能, 其支持事务、表锁和行锁、外键和`MVCC`, 在写操作场景下具有较高的并发性能. 而从库可以选择MySQL的MyISAM引擎, 其索引的叶子节点存储指向数据的指针, 因此无需回表, 具有较高的读操作性能. 读写分离使得主库和从库可以选择不同的存储引擎从而发挥各自的优势.


## 原理

1. 主库将所有的写操作(对数据的修改)记录入`binary log`日志文件中.
2. 从库使用网络IO线程读取主库的`bin log`日志.
3. 从库SQL线程`Replay`重现主库的写操作, 保证数据同步.

