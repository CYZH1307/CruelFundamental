中断的处理


中断是什么
中断是系统用来响应硬件设备请求的一种机制，操作系统收到硬件的中断请求，会打断正在执行的进程，然后调用内核中的中断处理程序来响应请求。
中断是一种异步的事件处理机制，可以提高系统的并发处理能力。


软中断是什么
中断处理程序可能会暂时关闭中断。这时如果中断处理程序执行时间过长，可能在还未执行完中断处理程序前，会丢失当前其他设备的中断请求。

Linux系统为了解决中断处理程序执行过长和中断丢失的问题，将中断过程分成了两个阶段，分别是上半部分和下半部分。
	-
	上半部分用来快速处理中断，一般会暂时关闭中断请求，主要负责处理跟硬件紧密相关或者时间敏感的事情。
	上半部直接处理硬件请求，（硬中断），主要是负责耗时短的工作，特点是快速执行。
	硬中断会打断CPU正在执行的任务，然后立即执行中断处理程序。

	-
	下半部分用来延迟处理上半部分未完成的工作，一般以内核线程的方式运行。
	下半部是由内核出发，（软中断），主要是负责上半部未完成的工作，通常都是耗时比较长的事情，特点是延迟执行。
	软中断是以内核线程的方式执行，并且每一个CPU都对应一个软中断内核线程


系统中有哪些软中断？

Linux中通过/proc/softirqs查看软中断的运行情况，通过/proc/interrupts来查看硬中断的运行情况。

