linux查询tcp连接处理CLOSE_ WAIT的状态的数目?

四次挥手过程

|                      主动关闭（客户端）                      |      |      |                      被动关闭（服务器）                      |
| :----------------------------------------------------------: | ---- | ---- | :----------------------------------------------------------: |
|        发送FIN=1， seq=M(进入FIN_WAIT_1终止等待1状态)        |      |      |                                                              |
|                                                              |      |      | 收到FIN 序号是M的包，回一个ACK=1的包确认号是ACK=M+1 （进入CLOSE_WAIT关闭等待状态，连接处于半关闭状态读通道关闭），此时客户端已经没有数据包要发送了，但是服务器如果发数据客户端仍然会接受。 |
| 收到ACK=1 确认号ack=M+1的包（进入FIN_WAIT状态并且写通道关闭）等待服务器发送连接释放报文（进入终止状态2），接收服务器发送数据包，并等待服务器发送连接释放报文 |      |      |                                                              |
|                                                              |      |      | 当服务器把数据发送完毕后，就向主动方发送FIN=1包，序号seq=N（进入最终确认状态） |
| 主动方收到了FIN=1 序号seq=N的包，发送一个ACK =1的包确认号是ack=N+1，并关闭关闭读通道 |      |      |                                                              |
|                                                              |      |      | 被动方收到了ACK=1的包确认号ack=N+1，（进入CLOSE状态，关闭写通道） |
|               主动方还需要等待两个最长报文寿命               |      |      |                                                              |
|                        进入CLOSE状态                         |      |      |                                                              |





