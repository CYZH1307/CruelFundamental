## TCP 4次挥手过程

客户端给服务端发送报文，报文里FIN为1，服务器知道了客户端想要断开连接，客户端数据传输完成，但服务端可能还有未发送完的数据。回复了一个报文ACK=1，我知道要断开连接了，再等我一下。一会儿，服务端会再发送一个断开连接的报文FIN=1的报文，由服务端发给客户端。表示服务端做好了断开连接的准备。客户端接收后给服务端发送了一个消息确认报文（ACK=1）。共有4次，此时客户端与服务端都做好了断开连接的准备。


## 为什么4次？

因为数据可能还没有传输完，所以服务端的收到确认和断开请求需要分开进行。


## 等待2MSL？

MSL是Maximum Segment Lifetime英文的缩写，中文可以译为“报文最大生存时间”。是任何报文在网络上存在的最长时间，超过这个时间报文将被丢弃。

确保客户端发出的最后一次ack包可到达服务端， 1MSL个时间内，报文会失效，若服务端没收到，则会重新第三次握手，发送断开连接请求，到客户端接收总耗时2MSL。如果等待2MSL没有收到服务端的重发请求，就可以断开连接，否则客户端再发送ack包。等待2MSL确保服务端能够收到客户端的确认消息。
