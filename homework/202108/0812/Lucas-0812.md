# C/C++/Java/GoLang 如何分配内存
# malloc 原理
- https://www.jianshu.com/p/7af62431983e

## 结构
- 采用内存池的方式，申请大块内存作为内存堆
- 将堆分为多个内存块，每次操作以块为基本单位
- 隐式链表，连接所有分配和未分配的内存块
- 显示的双向链表，连接所有未分配内存块

## 分配和回收
- 内存分配时，在隐式链表里查找所有空闲块
- 内存合并时，采用边界标记法，检查每个块的前后内存块是够分配
- 空闲链表，每个节点包括块大小和下一个块的地址
- 每次移动指针，直到找到符合大小的未分配内存块，并从链表中移除
- 如果块太大，则一分为二，尾部返回给用户，头部仍放在空闲链表
- 每次分配的都是一块连续内存
- 释放内存时，搜索空闲连接，找到插入位置
- 如果内存块相邻，则合并成一个较大的内存块







