数据库主从主要是为了做读写分离，提高数据读和写的可用性。 
mysql 主从模式一般情况下写操作是在主库， 读操作从从库读。 数据从主库到从库的同步主要是依赖binlog. 
Binlog是一种二进制数据的日志文件， 从库通过从主库读取binlog,来回复主库的操作，从而同步主库对数据的修改。
主库通过logdump线程不断的生成binlog数据， 主节点会为每个从节点建立log dump线程。 从节点通过I/O线程读取主库的binlog数据。 从库在每次向主库读取binlog后会记录读取到的位置，以便下一次从当前位置之后继续读取。
从主库中读取的binlog被解析为各种类型的event之后会记录到本地文件，这个文件被称为relay log. 从库会根据relay log内容更新数据。
使用binlog的好处是经过压缩，传输的数据量小。
主从模式有异步， 半同步和同步三种
异步模式下从库直接从主库读取binlog数据， 主库不回推送数据到从库，主库在完成事务后立刻返回。 
半同步模式： 半同步模式是主库在执行完客户端的事务后不立刻返回， 需要等从库将数据写道relay log后返回。
全同步模式是在所有从库都赋值了该事务并成功返回后猜返回给客户端，性能最差，一致性最好。