#### C++: 什么是智能指针？智能指针有什么用？分为哪几种？各自有什么特点？

介绍：C++里面有四个智能指针: auto_ptr, shared_ptr, weak_ptr, unique_ptr 其中后三个是c++11支持，并且第一个已经被11弃用。

**智能指针的作用？**
智能指针的作用是用来管理一个指针。

**为么要使用智能指针？**
当申请的空间在函数结束时忘记释放，将会造成内存泄漏。而智能指针是一个类，当超出了类的作用域时，类会自动调用析构函数，析构函数会自动释放资源。所以智能指针在函数结束时会自动释放内存空间，不需要手动释放内存空间，这样就避免了内存泄漏。

**一. auto_ptr（c++98的方案，cpp11已经抛弃）**
采用的所有权模式

**二.unique_ptr（替换auto_ptr）**
unique_ptr与auto_ptr相比，前者要求更严格，实现的是独占式拥有或严格拥有概念。

##### 三. shared_ptr

shared_ptr实现共享式拥有概念。多个智能指针可以指向相同对象，该对象和其相关资源会在“最后一个引用被销毁”时候释放。使用计数机制来表明资源被几个指针共享。可以通过成员函数use_count()来查看资源的所有者个数。

**成员函数：**

1. use_count 返回引用计数的个数
2. unique 返回是否是独占所有权( use_count 为 1)
3. swap 交换两个 shared_ptr 对象(即交换所拥有的对象)
4. reset 放弃内部对象的所有权或拥有对象的变更, 会引起原有对象的引用计数的减少=
5. get 返回内部对象(指针)

##### 四：weak_ptr

weak_ptr 是一种不控制对象生命周期的智能指针, 指向一个 shared_ptr 管理的对象。weak_ptr 设计的目的是为配合 shared_ptr 而引入的一种智能指针来协助 shared_ptr 工作, 它只可以从一个 shared_ptr 或另一个 weak_ptr 对象构造, 它的构造和析构不会引起引用记数的增加或减少。weak_ptr是用来解决shared_ptr相互引用时的死锁问题,如果说两个shared_ptr相互引用,那么这两个指针的引用计数永远不可能下降为0,资源永远不会释放。它是对对象的一种弱引用，不会增加对象的引用计数，和shared_ptr之间可以相互转化，shared_ptr可以直接赋值给它，它可以通过调用lock函数来获得shared_ptr。


ref：[参考链接](https://blog.csdn.net/yxh_1_/article/details/109000184)