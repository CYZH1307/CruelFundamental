### 讲讲守护进程、僵尸进程、孤儿进程。如何避免僵尸进程？

#### 守护进程、僵尸进程、孤儿进程

守护进程：运行在后台的进程，独立于终端并且周期性执行某种任务或等待处理某些事件发生。不需要用户输入就可以运行和提供某种服务。一般是在系统启动的时候就运行，除非强制终止。

孤儿进程：父进程退出，它的一个或多个子进程还在运行，子进程称为孤儿进程，孤儿进程会被init进程(进程号为1)，init进程会完成状态收集，统一管理。

僵尸进程：进程使用fork创建子进程，子进程退出，父进程没有调勇wait或者waitpid获取子进程的状态信息，那么子进程的进程描述符仍然在系统中，称为僵尸进程。危害：父进程没有wait/waitpid，则进程号会被一直占用。系统中有大量僵尸进程，可以直接将父进程杀死，僵尸进程变为孤儿进程，被init收养，init会释放僵尸进程所有资源。



#### 如何避免僵尸进程？

- 父进程使用wait()或waitpid()函数等待子进程退出
- 两次fork()：父进程先产生一个子进程，通过子进程再产生一个孙子进程，子进程在孙子进程退出前退出。由孙子进程处理事务，子进程创建完孙子进程就退出，由init进程接管孙子进程。
- 信号量处理函数：使用信号函数sigaction为SIGCHLD设置wait处理函数。





ref:

https://www.jianshu.com/p/7390f73ad668

https://blog.csdn.net/sty23122555/article/details/51199781