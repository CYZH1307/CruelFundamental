# 多级页表与快表

1. 为了提高内存的利用率，我们会把page做的足够小，一般是4096字节，但这样相应的我们的页表太多占据相当大的内存，因此我们思考如何优化页表存储

- 能否由索引查找改为顺序查找或二分查找？不行，即使是二分查找也会有多次的访存，速度相当慢，因此我们必须保证索引存储
- **多级页表：类似图书馆找书**

- - 先定位第几层
  - 再定位哪一个书架
  - 再定位书架里的哪一本

这么做的好处是，在page较小且必须维护索引存储的情况下，节省内存。但缺点是，多次访存



1. 快表又名TLB。
   - 在CPU与内存访问之间加一层TLB，**TLB是一组寄存器**，用来存放最近使用过的页对应的页框号；
   - 这样如果CPU需要访问某一页首先在TLB里面找，如果TLB里面有就不用访问内存了，因为TLB是寄存器，**cpu访问寄存器的速度远大于对内存的访问速度。这样就可以提升时间性能**了。可以看到提升时间性能最主要的因素就是可以在TLB里面直接找到该页对应的页框号。
   - 那么如何提升命中率的，首先TLB肯定是越大越好，但是TLB材料很贵，不会做得很大。TLB的大小大概是[64,1024]。**为什么TLB里面存放这么少的项就能实现“近似访存1次”？因为程序的局部性原理**。程序的局部性原理在用户程序里面对应的就是循环。TLB也被称为快表。

