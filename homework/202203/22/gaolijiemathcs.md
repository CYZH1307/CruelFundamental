### B树和B+树的区别，B+树应用在哪?

#### B树和B+树区别

B树是多路平衡查找树，B树中所有结点孩子个数最大值为B树的阶，用m表示。

B+树是应数据库需求出现的B树的变形树。m阶B+树每个分支结点最多有m棵子树。

主要区别：

```
(1)B+树每个结点，有n个关键字值只会含有n个子树，并且每个关键字包含一个子树。B树中n个关键字有n+1个子树。
(2)每个结点关键字n个数范围不同：B+树 非根内部结点 上取整[m/2]<=n<=m(根结点：1<=n<=m)；B树 非根内部结点 上取整[m/2]-1<=n<=m-1(根结点: 1<=n<=m-1);
(3)B+树中，叶结点包含信息，所有非叶结点只提供索引作用，非叶结点每个索引项只含有对应子树最大关键字和指向该子树的指针，不含有该关键字对应记录的存储䢑。
(4)B+树中，叶结点包含了全部关键字，在非叶结点中出现的关键字也会出现在叶结点中；B树中，叶结点包含的关键字和其他结点包含的关键字是不重复的。
(5)B+树中叶子结点包含全部关键字和指向相应记录的指针，叶结点中将关键字按大小顺序排列，并且相邻结点按大小链接起来。B+树会有两个头指针：一个指向根结点，另外一个指向关键字最小的叶子结点。
(6)B+树支持两种查找：一种从根开始的多路查找，另外一种从最小关键字的顺序查找(以支持数据库范围查询)。B+树的从根开始的多路查找，非叶结点关键字等于目标值的时候不停下，会一直查找到叶结点上的关键字为止，是一条从根开始到叶结点的路径。
```



#### B+树应用

MySQL的索引结构就是B+树。

- 叶子结点存放实际数据(索引+记录)，非叶结点只存放索引。
- 所有的索引都在叶子结点出现，并且叶子结点之间有有序链表串联。
- 非叶结点的索引也会同时存储在子结点当中，并且是在子结点中所有的索引的最大值或者最小值。
- 非叶子结点有多少子结点就有多少索引。

对比B树和B+树在数据库应用选型比较：

- 树高相当于IO查询次数：B树非叶结点也存数据，所以相同树大小B+树可以存更多的索引。B+树更加矮胖，树高更低，所以磁盘IO次数更少。

- B树没有冗余数据，所以插叙、删除的过程更加复杂。B+树插入、删除效率高。

- B+树叶子结点链接在一起，支持范围查询。B+树在InnoDB当中是双向链表，可以左右遍历。





