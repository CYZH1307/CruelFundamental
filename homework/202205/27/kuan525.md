### C++: shared_ptr是如何实现的

shared_ptr的原理：是**通过引用计数的方式来实现多个shared_ptr对象之间共享资源**。

1. shared_ptr在其内部，**给每个资源都维护了着一份计数，用来记录该份资源被几个对象共享**。
2. 在对象被销毁时(也就是**析构函数调用**)，就说明自己不使用该资源了，**对象的引用计数减一**。
3. **如果引用计数是0**，就说明自己是最后一个使用该资源的对象，**必须释放该资源**；
4. 如果不是0，就说明除了自己还有其他对象在使用该份资源，不能释放该资源，否则其他对象就成野指针了。

ref: [参考链接](https://cloud.tencent.com/developer/article/1688444)

