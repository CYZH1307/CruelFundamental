### 什么是事务的ACID特性？ 脏读，不可重复读，幻读的区别是什么？
A  原子性（Atomicity） 
* 就是把事物分割成像原子一样，表示我们事物需要细微的去控制。比如我给你转钱，里面有我扣钱，你到账。总不能我扣了钱，你没到账这种情况吧。所以就是指转账这个事物， 里面的所有环节哪怕一个出错，都需要事物回滚，就是一切回到之前那样。

C  一致性（Consistency）
* 一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须处于一致性状态。
* 还是转账来说，假设用户A和用户B两者的钱加起来一共是1000，那么不管A和B之间如何转账，转几次账，事务结束后两个用户的钱相加起来应该还得是1000，这就是事务的一致性。

I  隔离性（Isolation）
* 隔离性是当多个用户并发访问数据库时，比如操作同一张表时，数据库为每一个用户开启的事务，不能被其他事务的操作所干扰，多个并发事务之间要相互隔离。
* 即要达到这么一种效果：对于任意两个并发的事务T1和T2，在事务T1看来，T2要么在T1开始之前就已经结束，要么在T1结束之后才开始，这样每个事务都感觉不到有其他事务在并发地执行。
* 关于事务的隔离性数据库提供了4种隔离级别，稍后会介绍到。

D 持久性（Durability）
* 持久性是指一个事务一旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。

先介绍什么是脏读，不可重复读，幻读

脏读： （读取了未提交的新事物，然后被回滚了）
* 事务A读取了事务B中尚未提交的数据。如果事务B回滚，则A读取使用了错误的数据。
* 比如我给你转了100万，但是我还没有提交，此时你查询自己账户，多了100万，很开心。然后我发现转错人了，回滚了事物。然后你100万就没了。  在过程中你查到了没有提交事物的数据（多出的100万），这就是脏读。

（解决：如果 一个事物在读的时候，禁止读取未提交的事物。是不是就解决了。）

不可重复读： （读取了提交的新事物，指更新操作）
* 不可重复读是指在对于数据库中的某个数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了。
* 不可重复读和脏读的区别是，脏读是某一事务读取了另一个事务未提交的脏数据，而不可重复读则是读取了前一事务提交的数据。
* 在某些情况下，不可重复读并不是问题，比如我们多次查询某个数据当然以最后查询得到的结果为主。但在另一些情况下就有可能发生问题，例如同一个事物前后两次查询同一个数据，期望两次读的内容是一样的，但是因为读的过程中，因为令一个数据写了该数据，导致不可重复读。（解决：如果 一个事物在读的时候，禁止任何事物写。是不是就解决了。）

幻读：（也是读取了提交的新事物，指增删操作）
* 在事务A多次读取构成中，事务B对数据进行了新增操作，导致事务A多次读取的数据不一致。幻读和不可重复读的区别在于，
* 不可重复是针对记录的update操作，只要在记录上加写锁，就可避免；幻读是对记录的insert操作，
* 要禁止幻读必须加上全局的写锁(比如在表上加写锁)。 另外说一下两类丢失更新：
* （解决，如果一个事物加上表级锁，只要有任何东西操作这个表的时候，禁止任何操作的并发）

第一类事物丢失：（称为回滚丢失） 
* 对于第一类事物丢失，就是比如A和B同时在执行一个数据，然后B事物已经提交了，然后A事物回滚了，这样B事物的操作就因A事物回滚而丢失了。
* 举个例子，比如我又1000元。买一个东西，花了100元。然后我朋友给我转了1000元。理论上这两个事物正常的话，我应该还有1900元。  
* 但是比如现在两个A，B事物同时进行，第一步都先查询我余额还有1000元，然后B事物给我转了1000元，提交了，理论上我还有2000元。然后我买东西，100元的，买到一半，我事物回滚，就回滚成了1000元。（回滚丢失）如果我不回滚，也提交了，我就还剩900元（也就是下面介绍的第二类事物丢失，覆盖丢失）。

第二类事物丢失：（提交覆盖丢失）
* 对于第二类事物丢失，也称为覆盖丢失，就是A和B一起执行一个数据，两个同时取到一个数据，然后B事物首先提交，但是A事物加下来又提交，这样就覆盖了B事物，称为第二类事物丢失，覆盖丢失。