什么是内存屏障？
内存屏障（Memory barrier），是一类同步屏障指令，使得CPU或者编译器在对内存进行操作的时候，严格按照一定的顺序来执行，在内存屏障之前的指令和之后的指令不会因为系统优化等原因而导致乱序。

出现指令重排的原因：

1.编译器代码优化/编译器指令重排 影响代码执行顺序。

2.指令执行的乱序优化,流水线乱序执行,分支预测导致处理器次序和程序次序不一致。

CPU内存级别屏障作用：

1.防止指令重排序

2.保证数据可见性
