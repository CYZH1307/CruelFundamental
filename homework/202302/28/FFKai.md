## 如何用 Redis 实现分布式锁?

Redis可以通过使用SET命令的NX参数和EX参数来实现分布式锁。

1. 客户端通过SET命令尝试在Redis服务器上创建一个键（key）和一个值（value），并将NX参数设置为1（仅在键不存在时设置值）。这个键通常称为锁键。

2. 如果Redis服务器上不存在具有给定键的键值对，则客户端创建一个具有给定键和值的新键值对，并将它的过期时间（TTL）设置为一定时间。过期时间的设置可以保证在客户端释放锁之前，锁键不会一直存在于Redis中。

3. 如果Redis服务器上已经存在具有给定键的键值对，则客户端无法获得锁，并且必须等待其他客户端释放锁。

4. 客户端在使用完锁后，可以通过DEL命令将锁键从Redis中删除。
