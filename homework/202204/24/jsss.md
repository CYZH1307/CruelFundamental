# 乐观锁和悲观锁，让你来写你怎么实现

乐观锁和悲观锁是处理并发场景下的`Race Condition`问题的不同方式.

- 悲观锁
    悲观锁在处理临界区时会加锁处理, 直到执行完毕后才释放锁, 上锁期间其他线程或进程是无法访问该临界区的.

- 乐观锁
    乐观锁比较乐观, 在临界区不会进行加锁操作, 而是在数据更新的时候判断在此期间是否修改了数据, 如果修改了数据, 那么放弃操作.

悲观锁的实现主要是锁机制, 如`mutex`, `spinlock`.
乐观锁的实现主要有`CAS`操作和版本号比较(MySQL中MVCC使用`undo log`和`read view`来实现多版本并发控制).