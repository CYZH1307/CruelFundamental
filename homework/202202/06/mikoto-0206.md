#Redis的过期删除策略

通常来说过期删除策略主要分为三种：定时删除、惰性删除以及定期删除

1. 定时删除

定时删除时设置某个key的过期时间，一旦过期则立即执行删除操作，优点是节约内存，缺点是消耗cpu资源

2. 惰性删除

惰性删除是指设置某个key的过期时间后，只有在下次使用它时才去检查其是否过期，若过期则删除，优点是十分节省CPU资源，缺点是是非常占用内存资源，可能会延迟删除许多key，甚至永远无法删除一些之后不会用到的key

3. 定期删除

设置key的过期时间后，每隔一段时间检查是否过期，并统一删除过期key，通过合理设置时间可以较好的综合CPU与内存资源，但是存在致命缺点：某个key删除后但并未到定期删除的时间，下次查询就仍然会返回。

可见，上述过期删除策略都存在各自的优点和缺陷，单一策略的使用难以满足实际需要。因此Redis采用的是惰性删除与定期删除搭配使用的过期删除策略。可以理解为在惰性删除的基础上，每隔一段时间，**随机**从一定数量的数据库随机抽取一定数量的key进行检查，并清理过期键。随机抽取的策略进一步减少了对CPU资源的依赖，同时也较好的平衡了对内存资源的消耗。
