消息队列
如何做到不丢失消息。 
	1，对于网络传输丢失， 可以设置消息队列的确认机制。 每收到消息都会有确认。这样可以确保生产者将消息送达MQ. 
	2. 消息队列丢失消息： 消息队列采用持久化存储的方式，将消息写到硬盘，避免由于系统故障或宕机等原因导致丢失。当Broker是由多个节点组成的集群时，要将broker集群配置为 至少将消息发送到2个以上的节点再给客户端响应。 
	3. 消费者丢失消息： 采用手动模式， 消费者成功消费消息之后再确认。 
对于解决重复消息的问题：
保证消费端的幂等性， 即多次消费同一条重复消息对于的数据仍旧正确。
实现幂等性对于不同的业务场景有不同的方法。 主要分为以下几类：
1. 利用数据库的唯一性约束做检测。 由于唯一性的约束，如果此前消费过消息，那么再次消费会违背唯一性约束条件，就会失败
2. 设置数据更新的硬性条件约束。 当处理过消息后，就更新约束条件中需要判断的数据， 再次处理重复消息会不满足约束条件，从而不做更新。
3. 记录处理过的消息。 对消息编号， 每次开始处理时候查看消息是否被处理过， 如果没有处理则处理完消息更新并记录。