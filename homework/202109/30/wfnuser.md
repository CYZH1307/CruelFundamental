# IO多路复用
poll, epoll, select 都用于IO的多路复用。这里的多路复用指的是复用同一个线程监听多个IO事件。

`select`是出现的最早的。内置一个`fd_set`用于存放需要监听的`fd`。
问题主要包括：
1. 每次调用都需要把fd_set传递到内核空间
2. 如果内核态触发IO事件，将就绪数量传递给用户态后，需要再遍历一遍。
3. fd_set 上限 1024。 所以最多只能支持1024个并发数。

`poll` 和 `select` 基本无异。区别在于 `poll` 采用链表。

`epoll` 通过将管理监听fd和实际监听的操作分开，减少了拷贝的开销。
内存中维护红黑树，可以插入和删除监听的`fd`。
维护了一个就绪列表，`fd`有数据时会更新就绪列表，从而唤醒进程时可以直接得到哪些`fd`是活跃的。