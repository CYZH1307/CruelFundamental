# 2G物理内存，new一个3G的数组时发生什么？

虚拟地址空间支持3G的数组时, 编译是可以通过的. 而且不是操作系统给程序所需的全部内存空间, 而且在程序请求时才会分配物理内存页. 当操作全部的数组时, 会发生内存错误.

```cpp
#include <iostream>

using namespace std;
const int N = 2e9;

int* p = new int [N];

int main() {
    for (int i = 0; i < 100; i ++ )
        cout << p[i] << ' ';
    return 0;

/* output
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
*/
}
```