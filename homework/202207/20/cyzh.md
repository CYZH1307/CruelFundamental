## 2022/07/20

### 什么是COW（copy on write)?

在数据第一次写入到某个存储位置时，首先将原有内容拷贝出来，写到另一位置处，然后再将数据写入到存储设备中，该技术只拷贝在拷贝初始化开始之后修改过的数据。

#### 实现原理：

fork后，kerne将父进程的所有内存页权限设置危read-only，然后子进程的地址空间指向父进程，如果有写入的话触发页异常中断，中断中，kernel会把异常的页复制一份，父子进程各自有独立的一份



#### 优点：

减少分配和复制大量资源带来的瞬间延时

减少不必要的资源分配