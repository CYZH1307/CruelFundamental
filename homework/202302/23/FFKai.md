## redis过期删除策略

Redis通过使用过期删除策略来删除过期的键。当设置了一个键的过期时间时，Redis会自动在过期时间到达时删除这个键。为了避免在内存中保存过期键，Redis使用了一些内部机制来检测和删除过期键，这些机制包括：

1. 定期删除：Redis会周期性地随机检查一些键并删除过期的键。这个检查是通过一个内部的定时器来实现的。当这个定时器触发时，Redis会选择一些键，并检查它们是否已经过期。如果发现某个键已经过期，则删除它，并继续选择其他键进行检查。

2. 惰性删除：当客户端请求访问一个键时，Redis会先检查这个键是否已经过期。如果这个键已经过期，Redis会删除这个键，并返回一个空值给客户端。这个检查是在键被访问时进行的，因此被称为惰性删除。

3. 客户端连接时删除：当一个客户端连接到Redis时，Redis会检查一些过期的键，并删除它们。这个检查是在客户端连接时进行的。

需要注意的是，定期删除策略和惰性删除策略可能会导致过期键在一段时间内仍然存在于Redis中，这可能会对性能产生负面影响。为了最大程度地减少这种情况的发生，可以使用适当的过期时间，并且定期删除的频率应该与过期键的数量成比例增长。此外，还可以通过设置maxmemory选项来限制Redis使用的最大内存，以确保Redis不会因过多的过期键而耗尽内存。



