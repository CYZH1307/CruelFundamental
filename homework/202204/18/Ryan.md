# Linux 读写数据的整个流程，内核状态如何切换

## 读操作

若目标数据存在于内存，read()则直接读取，CPU无需切换内核态。  
若不存在于内存，则CPU需要切换至内核态，把数据从磁盘通过DMA拷贝到内核缓冲区，再从内核缓冲区拷贝到用户缓冲区。接着CPU切换回用户态，read()函数执行返回。

## 写操作

CPU需要切换至内核态，把数据从write()处的用户缓冲区拷贝到内核缓冲区，再从内核缓冲区拷贝到磁盘或网络缓冲区等待传输。接着CPU切换回用户态，把数据从write()函数执行返回。
