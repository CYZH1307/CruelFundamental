## 2022/05/20

### 简述TCP协议的滑动窗口，TCP协议的拥塞控

### 制，快重传机制。

#### 滑动窗口

TCP的接收方有一个缓存区，并不是接收数据后直接读取数据，当发送方发送的数据太快太多时，缓存区可能溢出。

TCP会通过让接收方维护一个**接收窗口**（receive window）的变量来提供流量控制

- **LastByteRead**:主机上的应用进程从缓存读出的数据流的最后一个字节编号
- **LastByteRecv**:从网络中到达的并且已经放入主机B接收缓存中的数据流的最后一个字节编号

$LastByteRevd - LastByteRead <= RevBuffer$

接收窗口用$rwnd$来表示：$rwnd = RevBuffer - (LastByteRevd - LastByteRead)$

rwnd 一直是变化的，主机B一直会将rwnd的值放在接收报文中，让A知道rwnd的值

当rwnd = 0时，主机A会持续发送只有1个字节数据的报文段，这些报文被B（接收方）接收确认后会返回rwnd的新值



#### 拥塞控制

**原因**：多条流入线路有分组到达，并需要同一输出线路，此时，如果路由器没有足够的内存来存放所有这些分组，那么有的分组就会丢失。

**方法**：在传输层可以采用：重传策略，乱序缓存策略，确认策略，流控制策略和确认超时策略



#### 快速重传

一旦接收到3个**冗余ACK**TCP就会执行快速重传，即定时器过期之前重传丢失的报文段