### 为什么http协议要设计成无连接的

1、HTTP1.0无连接

HTTP1.0是无状态无连接的。无连接的意思是浏览器每次请求都需要建立tcp连接，HTTP1.0规定浏览器和服务器之间保持短暂连接，每次请求的时候都需要建立TCP连接，服务器处理完后立即断开TCP连接（无连接），服务器不跟踪每个客户端也不记录过去的状态（无状态）。

优点：请求时建立连接，请求完释放连接，能够释放资源给其他请求连接的客户端。

缺点：

- 无法复用连接：每次发送请求都需要建立TCP，TCP连接释放开销大，导致网络利用率较低。
- 队头阻塞：HTTP1.0规定下一个请求必须要在上一个请求到达之后才能发送，假设一个请求一直不到达，那么下一个请求就不会发送，导致阻塞后面请求。

2、HTTP2.0

支持长连接：增加了一个Connection字段，设置keep-alive保持连接不断开，避免客户端与服务器端每次都重复建立释放连接，提高网络利用率，如果想要关闭HTTP连接，在请求头中设置Connection：false来告知服务器关闭请求。

支持管道化：只要第一个请求发出去，不需要等待返回就可以发第二个请求。

缺点：性能瓶颈

- 请求头没有压缩，部首冗长
- 服务器还是按序响应，服务器响应慢则会客户端请求不到数据，也是队头阻塞。
- 客户端开始服务器只能被动响应。
- 没有请求优先级控制
emergence ref:gaolijiemathcs.md
