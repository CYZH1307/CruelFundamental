# 什么是消息队列？

消息队列是一种进程间通信的中间件，通信消息先进先出，用于实现pub-sub通信模式。  
publisher是往消息队列里放通信消息的进程，即生产者，subscriber是从消息队列里拿通信消息的进程，即消费者。  

使用消息队列的目的有以下几种

### 解耦

这个很好理解，pub-sub通常是sub数量远高于pub的配置，如果sub每次拿消息都要和pub直接通信，则pub将消耗大量资源在通信应答上，无法专注于产生消息的逻辑；且sub每次变动都可能要修改pub本身的逻辑。
而使用消息队列后，pub将消息发送到队列上便不用再管应答，也无需根据sub的数量来修改应答逻辑，实现了pub和sub的解耦。


### 异步

同步的一对多通信必然带来pub对多个sub的轮询，如果sub的空闲概率很高，则轮询无意义，需要做成异步形式。而消息队列是其中一种实现方式。

### 限流

在pub的发送量很大，甚至远高于sub处理能力总和的时候，如果直接通信有可能引起sub宕机。使用高容量的消息队列作为buffer有助于缓解这一情况，sub们可根据自身处理能力去消息队列拿信息。
