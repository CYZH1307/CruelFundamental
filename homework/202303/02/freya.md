## Linux 系统是如何收发网络包的？

### 接收

1. 网络数据包到达网卡，顺序进入接收队列
2. 将数据包从网卡硬件缓存转移到服务器内存中。
3. 通知内核处理。
4. 经过TCP/IP协议逐层处理。
5. 应用程序通过read()从socket buffer读取数据。

### 发送

1. 应用程序调用 Socket API发送网络包，套接字层把数据包放到 Socket 发送缓冲区中；
2. TCP/IP协议栈处理。
3. 协议栈处理完成后产生软中断通知驱动程序，发送队列中有新的网络帧需要发送；
4. 最后，驱动程序通过 DMA ，从发包队列中读出网络帧，并通过物理网卡把它发送出去。