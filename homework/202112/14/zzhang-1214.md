# 孤儿进程，僵尸进程，写时复制



孤儿进程 *Orphan Process*

- 父进程推出时，它的子进程们还在运行
- 孤儿进程会被init进程收养，并由init进程对它们完成状态收集工作
- 没有危害
- 应用：用户也可能会刻意使进程成为孤儿进程，以使之与用户会话脱钩，并转至后台运行。这一做法常应用于启动需要长时间运行的进程，也即守护进程 (*daemon*)。



僵尸进程 *zombie process*

- 一个子进程在其父进程还没有调用`wait()` 或 `waitpid()` 的情况下退出。
- 任何一个子进程在 `exit()` 后并非马上消失，其进程描述符还存着，等待父进程处理。如果父进程没有处理，会一直占用进程号。
- 因为进程号一直被占用，如果有大量僵尸进程，会使得无法运行新的进程。



写时复制 *Copy-on-write*

- 调用 `fork` 系统调用创建子进程时，并不会把父进程所有占用的内存页复制一份，而是与父进程共用相同的内存页，而当子进程或者父进程对内存页进行修改时才会进行复制。
- More details: https://segmentfault.com/a/1190000039869422

