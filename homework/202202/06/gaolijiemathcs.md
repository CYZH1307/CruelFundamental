# Redis数据过期后的删除策略？

数据库键的过期时间都保存在过期字典当中，通过过期时间可以判断一个键是否过期。

三种过期删除策略：定时删除、惰性删除、定期删除

- 定时删除：设置键的过期的时间同时，创建一个定时器，定时器在键过期时间来临，立即执行对键的删除。
- 惰性删除：放任键过期不管，每次从键空间获取键的时候，都检查取得的键是否过期，如果过期就删除。没有过期则返回。
- 定期删除：每隔一段时间，检查一次删除过期键。

### 1 定时删除

（1）定义：定时删除在设置键的过期时间的同时，创建一个定时器(timer)，让定时器在键的过期时间来临的时候，立刻执行对键的删除操作。

（2）优点：对内存最友好，通过使用定时器，定时删除策略可以保证过期键将会尽可能快的被删除，并且释放过期键所占用的内存。

（3）缺点：对CPU时间不友好，在过期键比较多的时候，删除过期键可能会占用相当一部分CPU时间，在内存不紧张，但是CPU时间紧张的情况下，将CPU时间用在删除和当前任务无关的键，是对服务器响应时间和吞吐量造成影响的行为。