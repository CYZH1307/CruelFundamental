# Redis如何实现事务

简单理解，事务就是将一系列操作（或者命令）打包，事务处理时会按顺序依次执行，要么全部操作执行成功，若其中有一个操作失败，那么整个事务操作将会被回滚，

Redis实现事务主要依靠以下几个命令实现：
- MULTI： 用于标记事务的开始，之后的命令都会存入命令队列，遇到DISCARD或者EXEC操作时，操作才会被取消或者是执行
- EXEC：执行一个事务命令队列中的所有命令，同时将当前状态恢复为正常状态（非事务状态）
- DISCARD：回滚事务中的所有命令，同时将当前状态恢复为正常状态（非事务状态）
- WATCH： MULTI命令执行之前，可以指定待监控的Keys，执行EXEC之前，若被监控的Keys改变，那么EXEC会放弃所有事务中未执行的命令
- UNWATCH：取消某个Keys的监控状态，若执行了EXEC或者DISCARD命令，那么事务中所有被监控的Keys会自动取消监控状态，无需手动执行

事务执行主要经过三个阶段：
事务开始 --> 命令入队 --> 事务执行，对应MULTI命令（事务开始），其它待执行命令（命令入队），EXEC或者DISCARD（事务执行）
