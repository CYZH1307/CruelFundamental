# 简述TCP四次挥手过程

# 为什么TCP挥手需要4次？ #

相比起TCP握手的“发收发”（客户端视角）3次，TCP挥手会在第二第三次中间多出一次服务端挥手，形成“发收收发”（客户端视角）。这是因为连接仍在工作中，在第一次挥手发出之前，客户端的请求可能仍未在服务端处理完毕，
而第一次挥手发出之后，客户端不再发出新的请求，因此可在服务端发出第二次挥手后留出一段时间给服务端将所有存量请求处理完毕，保证通信内容的完整。处理完存量请求之后，服务端发出第三次挥手，表示服务端也不再发出应答，通信结束。
最后第四次挥手意义同第三次握手。

# 为什么四次挥手释放连接时需要等待2MSL？ #

因为第四次挥手有可能丢失，若服务端没收到第四次挥手，则会重发第三次挥手，如果客户端发出第四次挥手后不等够2MSL，则收不到重发的第三次挥手，也就无法重发第四次挥手，导致TCP四次挥手无法完成。
