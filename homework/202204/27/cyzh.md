## 2022/04/27

### 分布式事务如何解决？TCC了解？

### 分布式事务

分布式事务就是要在分布式系统中实现事务。

通常由6种解决方案，2PC，3PC，TCC，本地消息表，消息事务，最大努力通知

### TCC

TCC分为 Try，Confirm，Cancel 三个词语的缩写，TCC要求每个分支事务实现三个操作，预处理，确认和撤销。

- Try阶段 做一个业务检查和资源预留，这是一个初步操作
- Confirm阶段：是确认提交，Try阶段已经完成后开始Confirm阶段，通常是不会出错的，如果Confirm阶段出错需要引入重试机制或者人工处理
- Cancel阶段：是在业务执行错误需要回滚的状态下的执行的分支事务的业务取消，预留资源的释放，通常情况下，采用TCC也默认Cancel阶段一定成功