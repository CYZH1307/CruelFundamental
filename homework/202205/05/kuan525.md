### 如何处理消息队列的消息积压问题？

1. 如果仅仅是consumer消费的速度落后于消息生产的速度的话，可以考虑采用扩容消费者群组的方式。

2. 如果积压比较严重，积压了上百万、上千万的消息。

   1. 修复现有consumer的问题，并将其停掉。
   2. 重新创建一个容量更大的topic，比如patition是原来的10倍。
   3. 编写一个临时consumer程序，消费原来积压的队列。该consumer不做任何耗时的操作，将消息均匀写入新创建的队列里。
   4. 将修复好的consumer部署到原来10倍的机器上消费新队列。
   5. 消息积压解决后，恢复原有架构。

3.  如果消息已经丢失

   由于有的消息队列有过期失效的机制，造成了大量的消息丢失。
   这种情况只能将丢失的那批数据，写个临时程序，一点一点的查出来，然后重新灌入mq里面去。 

ref：[参考文档](https://www.cnblogs.com/Allen-rg/p/11690233.html)