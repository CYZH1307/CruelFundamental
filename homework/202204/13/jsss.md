# 讲一下建立一个HTTP request的过程

1. 首先域名解析, 将域名解析成IP地址, 使用浏览器或本机DNS缓存, 如果查找不到就到本地DNS服务器进行递归或迭代查询, 这里可能会涉及DNS负载均衡.

2. 拿到IP地址后使用在TCP头的基础上添加IP头, 主要内容是本端和对端IP地址. 然后添加MAC地址, 本端MAC地址是机器自身MAC地址, 对端MAC地址是路由器MAC地址(要经过IP层路由器转发的话), 然后经过数据链路层封装成帧, 使用物理层传输到路由器.

3. 进行三次握手建立HTTP连接后开始数据的传输. 请求包经过路由器到达服务器后, 一般服务器会配置负载均衡服务器如Nginx, 它会进行负载均衡和反向代理, 将请求解析后转发给后端服务器请求动态资源, 如果客户端请求静态资源, 那么Nginx可以直接返回. Nginx主要使用IO多路复用来提升服务性能.

4. 本机接收到服务器HTTP响应后, 进行校验及纠错(CRC纠错, 基于奇偶校验)、累计确认(TCP可靠传输)等, 然后对HTTP包进行解析, 解析后浏览器进行渲染, 我们看到了网页的内容.