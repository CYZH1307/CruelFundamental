## 0122

### 介绍一下MySQL中的各种日志

1. **重做日志**（redo log）：
   - 确保事务的持久性，记录事务执行后的状态，用来恢复未写入data file的已成功的事务更新数据，防止在发生故障的时候，仍然有脏页未写入磁盘，在重启mysql服务的时候，根据重做日志进行重做，达到事务的持久性
2. **回滚日志**（undo log）：
   - 保证数据的原子性，保证事务在发生之前的数据版本，可以用于回滚，同时提供多版本并发控制下的读（MVCC），即非锁定读
3. **二进制日志**（binlog）：
   - 用于复制，在主从复制中，从库利用主库的binlog进行重播，实现主从同步
4. **错误日志**（err log）：
   - 记录着mysql启动和停止，以及服务器在运行过程中发生的错误的相关信息
5. **慢查询日志**:
   - 记录执行时间过长和没有使用索引的查询语句
6. **查询日志**（general log）：
   - 数据库执行的所有命令，不管语句是否正确，都会被查询日志记录下来
7. **中继日志**（relay log）：
   - 二进制日志差不多，区别是：relay log是从库服务器I/O线程将主库服务器的二进制日志读取过来记录到从服务器本地文件，然后从库的SQL线程读取relay-log日志内容并应用到从库服务器上

**脏页**：**linux内核中的概念**，因为硬盘的读写速度远赶不上内存的速度，系统就把读写比较频繁的数据事先放到内存中，以提高读写速度，这就叫高速缓存，linux是以页作为高速缓存的单位，当进程修改了高速缓存里的数据时，该页就被内核标记为脏页，内核将会在合适的时间把脏页的数据写到磁盘中去，以保持高速缓存中的数据和磁盘中的数据是一致的。

#### ref：

[MySQL中的几种日志了解 - myseries - 博客园 (cnblogs.com)](https://www.cnblogs.com/myseries/p/10728533.html)

[玩转MySQL之八\]MySQL日志分类及简介 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/58011817)