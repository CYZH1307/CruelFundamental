### 简述什么是布隆过滤器？

#### 基本原理

布隆过滤器，实现一个超大位数组和几个哈希函数，假设数组长度为m，哈希函数的个数为k。

（1）添加元素

- 位数组初始化，每个位为0，对集合中的每一个元素。
- 依次通过k个哈希函数映射，为一个哈希值，对应数组中的一个点，将对应的点设置为1.

（2）查询元素

- 查询元素A的时候，也是走k个哈希函数，到k个点。
- 如果有一个点不为1则判断该元素一定不在集合中。
- 反之，k个点都为1，那么元素可能在集合中。

#### 缺点

- 会有一定的误判率：因为k个点为1不一定元素在集合中，可能是其他点映射到的这个点为1。只能判断绝对不在集合中，不能给出匹配的值一定在集合中。随着元素增加，误判率会上升。

- 删除问题：因为每个bit不是单独占用的，有可能多个元素共享以为，因此删除这一位设为0会影响其他元素。因此可以添加不能删除（删除导致误判率增加）。
- 有一种解决方案是将1改为计数，但是实际上还是需要判断这个元素在不在这个集合里面，这一点一般的布隆过滤器本身无法解决，如果引入其他组件就涉及到数据一致性的问题。

#### 优点

插入和查询都是常数级别O(k)，数据空间小，不用存数据就可以判断数据是否存在。可以用在防止redis缓存穿透问题上面。



