### 什么是MESI协议？

MESI协议是一个基于失效的缓存一致性协议，支持写回缓存的最常用协议。

与写直达缓存相比，回写缓冲能节约大量带宽。总有脏数据状态，表示缓存中的数据与主存中的不一样，MESI协议要求在缓存不命中，并且数据块在另外一个缓存的时候，允许缓存到缓存的数据复制。

Modified(M)已修改：缓存行是脏的，与主存值不同，如果别的CPU内核要在读主存这块数据，要协会到主存，状态改变为共享状态。

Exclusive(E)独占：缓存只在当前缓存中，但是干净的，缓存数据同于主存数据，当别的缓存读取它的时候，状态为共享；当前写数据时，变为已修改状态。

Shared(S)共享：缓存行也存在于其他缓存中并且为干净的，缓存行可以在任意时刻抛弃。

Invalid(I)无效：缓存行是无效的。

ref:https://zh.m.wikipedia.org/zh-hans/MESI%E5%8D%8F%E8%AE%AE
