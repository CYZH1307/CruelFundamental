### 如何人为避免out-of-order execution

可以加入内存屏障

内存屏障又细分为好几种

以c++为例

**读屏障rmb()**
处理器对读屏障前后的取数指令（LOAD）能保证有序，但是不一定能保证其他算术指令或者是写指令的有序。

**写屏障wmb()**
处理器对屏障前后的写指令（STORE）能保证有序，但是不一定能保证其他算术指令或者是读指令的有序。

**通用内存屏障mb()**
处理器保障只有屏障之前的访存操作（包括读写）都完 成以后才会执行屏障之后的访存操作。