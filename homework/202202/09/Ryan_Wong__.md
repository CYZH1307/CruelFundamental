# 如何保证缓存一致性
解决这个问题，关键是把对缓存的操作和对数据库的操作合并成逻辑上能保证事务性的一个操作。

-方案1：分布式锁：
    *任意操作缓存或操作数据库数据的线程必须申请分布式锁，申请成功则在操作完毕后释放锁。
    *申请不成功则进入轮询或直接异常退出。
 
-方案2：删除缓存：
    *任意操作数据的线程都会直接更新数据库本身，并删除已有的缓存。
    *若先更新数据库再删除缓存，则工作效率高，数据在缓存未删除时会出现短暂的不一致。可通过消息队列来一定程度解决这个短暂不一致的问题。
    *若先删除缓存再更新数据库，则由于新来的读取线程都得从数据库直接读取，工作效率低。数据一致性高。
