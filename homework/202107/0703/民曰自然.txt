死锁的产生
当下列四个条件都满足时，死锁会出现.
1. 互斥 在同一时间，一个资源只能被分配给一个进程或线程。 
2. 持有和等待 一个进程/线程可以在持有资源的同时等待另外的资源。 
3. 禁止抢占 只有持有资源的进程/线程才能释放这个资源。 
4. 循环等待 一系列进程互相持有所需要的资源，比如P1等待P2的同时P2等待P1 
处理死锁的方法
1. 如果检测到死锁已经发生，就强制结束一个进程来释放资源。 
2. 不允许独占资源
3. 在一开始就申请所有资源，或者只有不持有其他资源时才能申请下一个资源，不允许持有等待。 
4. 允许抢占其他进程/线程持有的资源。 