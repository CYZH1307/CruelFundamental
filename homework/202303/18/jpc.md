### 如何理解TCP是面向字节流的协议？

**UDP是面向报文的协议**

操作系统不会对消息进行拆分，在组装好 UDP 头部后就交给网络层来处理，所以发出去的 UDP 报文中的数据部分就是完整的用户消息，也就是每个 UDP 报文就是一个用户消息的边界，这样接收方在接收到 UDP 报文后，读一个 UDP 报文就能读取到完整的用户消息。

**TCP是面向字节流的协议**

当用户消息通过 TCP 协议传输时，**消息可能会被操作系统分组成多个的 TCP 报文**，也就是一个完整的用户消息被拆分成多个 TCP 报文进行传输。每个数据段都被分配了一个序列号，表示这个数据段在整个数据流中的位置。

接收方通过序列号和确认号来确定接收到的数据段，并且可以根据序列号来检查数据是否有丢失或者乱序的情况发生，以便进行相应的重传和重新排序。

三种解决粘包的方式：

- 固定长度的消息；
- 特殊字符作为边界；
- 自定义消息结构。
