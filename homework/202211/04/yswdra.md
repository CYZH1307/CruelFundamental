### Linux x86 下进程最多使用的栈空间和堆空间分别是多少？

------

2位Windows，一个进程栈的默认大小是1M，在vs的编译属性可以修改程序运行时进程的栈大小。
Linux下进程栈的默认大小是10M，可以通过 ulimit -s查看并修改默认栈大小。
默认一个线程要预留1M左右的栈大小，所以进程中有N个线程时，Windows下大概有N*M的栈大小。
堆的大小理论上大概等于进程虚拟空间大小-内核虚拟内存大小。windows下，进程的高位2G留给内核，低位2G留给用户，所以进程堆的大小小于2G。Linux下，进程的高位1G留给内核，低位3G留给用户，所以进程堆大小小于3G。

进程的最大线程数：
32位windows下，一个进程空间4G，内核占2G，留给用户只有2G，一个线程默认栈是1M，所以一个进程最大开2048个线程。当然内存不会完全拿来做线程的栈，所以最大线程数实际值要小于2048，大概2000个。
32位Linux下，一个进程空间4G，内核占1G，用户留3G，一个线程默认8M，所以最多380个左右线程。（ps：ulimit -a 查看电脑的最大进程数，大概7000多个）