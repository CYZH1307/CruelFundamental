# 电商分库分表
点评团队的实践： https://tech.meituan.com/2016/11/18/dianping-order-db-sharding.html

分库分表目标：随着订单容量增大；查询维度增多；单库+索引已经不能满足查询需要。需要进行水平和垂直切分。

垂直切分：基于业务属性进行分库 -> 基础订单 + 订单流程 ...

水平切分策略： 

1. sharding key -> db
2. 时间范围切分
3. **Hash切分** 这个比较推荐 易于扩展

32 * 32 = 1024表
32个库；每个库32张表

库到瓶颈 可以直接扩展32个集群

## 唯一ID
snowflake
flickr
random...

## 问题
1. 事务支持
2. 复杂查询 -> 🈲️不带切分的查询

## 总结
非必要不要水平拆分，增加开发复杂度。