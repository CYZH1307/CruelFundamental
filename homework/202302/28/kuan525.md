## 如何用 Redis 实现分布式锁的？
redis可以使用set加NX属性可以实现，key不存在才插入，可以用来实现分布式锁：
1. 如果key不存在，则显示插入成功，可以用来显示加锁成功
2. 如果可以存在，则显示插入失败，可以表示加锁失败
基于redis的分布式锁，对于加锁操作，需要实现三个条件
1. 加锁包括了读取锁变量，检查锁变量，和设置锁变量值三个操作，但是需要原子性，所以我们使用set的NX的参数来实现加锁。
2. 锁变量需要设置过期时间，以免客户端拿到锁之后发生异常，导致锁一直无法释放，所以，我们在设置set的时候加上EX/PX选项，设置其过期时间
3. 锁变量的值需要能区分不同客户端的加锁操作，以免在释放锁的时候，出现误释放操作，所以我们在使用set命令的时候，每个客户端设置的值是一个惟一的值，用户表示客户端
解锁的时候需要lua脚本，用于保证原子性（先要判断用户是否是对滴）