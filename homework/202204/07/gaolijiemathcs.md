### 搜索引擎倒排原理及实现方式

倒排索引，是正向索引的逆序过程，正向索引是通过key找value，倒排索引是通过value找key。

倒排索引在搜索引擎中实现后，方便通过物品属性关键词与对应物品的索引结构。搜索引擎通过构建倒排索引，能够通过搜索对象关键属性，直接找到对应属性的索引对象即搜索对象文档。



实现方式：

首先对存储的文本进行分词，划分出一串单词(Term).

维护一个单词字典(Term Dictionary)，可以依据Term的特点进行划分字典，将Term归纳入字典集合，并建立字典集合与文档对象id的映射关系(Posting List)。

因为无法在内存中直接存放单词字典，因此在内存中可以维护一个字典树term index。

同时要解决Posting List中的压缩存储和求交集的过程。

- 压缩存储：可以使用位图、高位聚合

- 求交集：因为每次查找可能会匹配多个文档，需要求交集，可以用跳表(因为每个Posting List维护的时候已经是有序的)。



通过搜索关键字划分-内存中Term index(词项-词项索引)-磁盘找Term Dictionary(找词项term对应的倒排索引)-磁盘通过索引找到对应的文档-文档交集得到搜索结果。



参考：Elasticsearch原理
