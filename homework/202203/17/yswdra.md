### 2G物理内存，new一个3G的数组时发生什么？

------

如果是32位操作系统应该是直接分配失败了。

如果是64位操作系统下， 一般都会成功，操作系统会赋予该进程的堆中一块连续的3G大小的空间使用权限（或或者说映射），此时不会做真实物理内存的分配。在访问时会根据情况从物理内存中拿，若是不存在于物理内存且物理内存已满，就会从磁盘置换进内存中。LInux操作系统存在写时复制的机制，因此只有在第一次写内存的时候才会去分配真实的物理内存。