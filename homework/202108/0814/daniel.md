# 共享内存


## 基本原理

### shm
* 通过调用 shmget, 内核开辟一段共享内存区域
* 多个进程可以通过 shmat 将此物理内存区域映射到自己的进程地址空间中
* 之后, 即可对共享内存区域进行读写, 而不用经过内核处理
* shmdt 可以用来卸载共享内存段

### mmap
* mmap 也可以用来进行内存共享, 原理是多个进程创建到同一文件的映射
* 由于映射在各自的虚拟地址空间,一次一个进程对文件进行了修改, 其他进程也可以看到, 从而实现了内存共享.

## 优势
数据不需要经过内核即可进行读写, 无需copy, 速度快. 但是需要额外的机制来避免 data race