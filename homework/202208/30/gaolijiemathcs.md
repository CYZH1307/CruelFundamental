### 什么是操作系统的宏内核和微内核？ 微内核为什么更安全但是运行更慢？

#### 什么是宏内核和微内核？

- 宏内核又称为单内核，操作系统内核的所有模块（进程调度、内存管理、文件系统、设备驱动等）均运行在内核态，具有直接操作硬件的能力。所有内核模块都运行在特权空间，单点错误可能会导致整个系统崩溃。
- 微内核，宏内核系统复杂度增加，后来尝试将单个功能或者模块（如文件系统、设备驱动等）从内核拆分出来，作为独立服务部署到独立运行环境，内核只保留少数功能，为服务通信提供基础能力，这种称为微内核。微内核架构服务之间进行隔离，单个服务被攻击也不会直接导致整个系统崩溃。

#### 微内核为什么更安全但是性能更差？

因为宏内核所有模块都在特权空间运行，由于代码中存在安全隐患，例如内核态驱动容易导致低质量代码入侵内核，粗粒度的权限管控容易有权限漏洞等等。

因为微内核将一些宏内核的内核功能作为服务放在用户态运行，并将进程间通信IPC设计的通用，导致微内核在运行时会占用较大的资源（用户态和内核态需要不断的切换），所以性能会比同期的宏内核差。